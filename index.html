<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Super Mario Memory</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <audio id="bgMusic" loop><source src="audio/theme.mp3" type="audio/mpeg"></audio>
    <audio id="sfxPause"><source src="audio/pause.mp3" type="audio/mpeg"></audio>
    <audio id="sfxGameOver"><source src="audio/gameover.mp3" type="audio/mpeg"></audio>
    <audio id="sfxWin"><source src="audio/win.mp3" type="audio/mpeg"></audio>
    <audio id="sfxBowser"><source src="audio/bowser.mp3" type="audio/mpeg"></audio>
    <audio id="sfx1up"><source src="audio/1up.mp3" type="audio/mpeg"></audio>
    <audio id="sfxStar"><source src="audio/powerfull.mp3" type="audio/mpeg"></audio>
    <audio id="sfxFireball"><source src="audio/fireball.mp3" type="audio/mpeg"></audio>
    <audio id="sfxBoo"><source src="audio/boo.mp3" type="audio/mpeg"></audio>
    <audio id="sfxFlip"><source src="audio/flip.mp3" type="audio/mpeg"></audio>
    <audio id="sfxStart"><source src="audio/start.mp3" type="audio/mpeg"></audio>
    <audio id="sfxSplat"><source src="audio/splat.mp3" type="audio/mpeg"></audio>
    <audio id="sfxKamek"><source src="audio/kamek.mp3" type="audio/mpeg"></audio>
    <audio id="sfxExplosion"><source src="audio/explosion.mp3" type="audio/mpeg"></audio>
    <audio id="sfxShyGuy"><source src="audio/shyguy.mp3" type="audio/mpeg"></audio>
    <audio id="sfxSwish"><source src="audio/swish.mp3" type="audio/mpeg"></audio>

    <div class="overlay active" id="startMenu">
        <div class="menu-box">
            <h2 style="margin-top:0">CHOISIS TON NIVEAU</h2>
            <button class="btn-level" onclick="openSelectionMenu('easy')">FACILE (5 Vies)</button>
            <button class="btn-level" onclick="openSelectionMenu('medium')">MOYEN (10 Vies)</button>
            <button class="btn-level" onclick="openSelectionMenu('hard')">DIFFICILE (15 Vies)</button>

            <div style="display: flex; gap: 10px; justify-content: center; width: 100%;">
                <button class="btn-level btn-custom" style="width: 48%; margin: 15px 0;" onclick="openCustomMenu()">üõ†Ô∏è PERSO</button>
                <button class="btn-level btn-skin" style="width: 48%; margin: 15px 0;" onclick="openSkinMenu()">üé® SKINS</button>
            </div>

            <button class="btn-level btn-album" onclick="openAlbumMenu()">üìí ALBUM</button>

            <button class="btn-level btn-reset" onclick="resetBestScores()">üóëÔ∏è EFFACER SCORES</button>
        </div>
    </div>

    <div class="overlay" id="albumMenu">
        <div class="menu-box" style="max-width: 800px;">
            <h2 style="margin-top:0; color:#FFD700;">ALBUM DE COLLECTION</h2>
            <p id="albumProgress">Progression : 0 / 0</p>

            <div class="album-grid" id="albumGrid">
            </div>

            <button class="btn-menu" style="background: #555; border-color: #999; margin-top: 20px;" onclick="goToMainMenu()">RETOUR</button>
        </div>
    </div>

    <div class="overlay" id="skinMenu">
        <div class="menu-box">
            <h2 style="margin-top:0; color:#049CD8;">DOS DES CARTES</h2>
            <p>Choisis ton style :</p>

            <div class="skin-grid">
                <div class="skin-option" id="skin-block-option" onclick="selectSkin('skin-block')">
                    <img src="images/block.png" alt="Bloc ?">
                    <span>Classique</span>
                </div>
                <div class="skin-option" id="skin-pipe-option" onclick="selectSkin('skin-pipe')">
                    <img src="images/pipe.png" alt="Tuyau">
                    <span>Tuyau</span>
                </div>
                <div class="skin-option" id="skin-coin-option" onclick="selectSkin('skin-coin')">
                    <img src="images/coin.png" alt="Pi√®ce">
                    <span>Pi√®ce</span>
                </div>
                <div class="skin-option" id="skin-gold-option" onclick="selectSkin('skin-gold')">
                    <img src="images/goldblock.png" alt="Or">
                    <span>Bloc Or</span>
                </div>
            </div>

            <button class="btn-menu" style="margin-top: 20px;" onclick="goToMainMenu()">VALIDER</button>
        </div>
    </div>

    <div class="overlay" id="customMenu">
        <div class="menu-box">
            <h2 style="margin-top:0; color:#9b59b6;">PARTIE PERSO</h2>

            <div style="margin: 15px 0; text-align: left;">
                <div class="custom-label"><span>Paires</span> <b id="customPairsVal">8</b></div>
                <input type="range" id="customPairs" class="custom-range" min="2" max="39" value="8" oninput="document.getElementById('customPairsVal').innerText = this.value">
            </div>

            <div style="margin: 15px 0; text-align: left;">
                <div class="custom-label"><span>Vies</span> <b id="customLivesVal">10</b></div>
                <input type="range" id="customLives" class="custom-range" min="1" max="99" value="10" oninput="document.getElementById('customLivesVal').innerText = this.value">
            </div>

            <div style="margin: 15px 0; text-align: left;">
                <div class="custom-label"><span>Temps</span> <b id="customTimeVal">60s</b></div>
                <input type="range" id="customTime" class="custom-range" min="10" max="300" step="10" value="60" oninput="document.getElementById('customTimeVal').innerText = this.value + 's'">
            </div>

            <div style="display: flex; justify-content: center; gap: 10px;">
                <button class="btn-menu" style="background: #555; border-color: #999; width: 40%;" onclick="goToMainMenu()">RETOUR</button>
                <button class="btn-level btn-custom" style="width: 60%; margin: 10px 0;" onclick="setupCustomGame()">SUIVANT ‚û°</button>
            </div>
        </div>
    </div>

    <div class="overlay" id="selectionMenu">
        <div class="menu-box">
            <h2 style="margin-top:0">CHOISIS TON √âQUIPE</h2>
            <p id="selectionTitle">S√©lectionne 6 personnages</p>

            <div class="select-container" id="selectionGrid"></div>

            <p id="charDescription" class="char-description">Survole un personnage pour voir son effet.</p>

            <div style="display: flex; justify-content: center; gap: 10px; flex-wrap: wrap;">
                <button class="btn-menu" style="width: 150px; background: #555; border-color: #999;" onclick="goToMainMenu()">RETOUR</button>
                <button class="btn-menu btn-deselect" style="width: 160px;" onclick="deselectAll()">‚ùå TOUT VIDER</button>
                <button class="btn-menu btn-random" style="width: 180px;" onclick="randomSelection()">üé≤ AL√âATOIRE</button>
                <button id="btnStartGame" class="btn-menu btn-disabled" style="width: 150px;" onclick="confirmSelection()">JOUER !</button>
            </div>
        </div>
    </div>

    <div class="overlay" id="countdownOverlay">
        <div id="countdownText">3</div>
    </div>

    <div class="overlay" id="pauseMenu">
        <div class="menu-box">
            <h2 style="margin-top:0; color:#E52521">PAUSE</h2>
            <button class="btn-menu" onclick="togglePause()">‚ñ∂ REPRENDRE</button>
            <button class="btn-menu" onclick="restartCurrentLevel()">RECOMMENCER</button>
            <button class="btn-menu" onclick="goToMainMenu()">MENU PRINCIPAL</button>
        </div>
    </div>

    <div class="overlay" id="helpMenu">
        <div class="menu-box" style="max-width: 600px; text-align: left;">
            <h2 style="margin-top:0; color:#E52521; text-align: center;">GUIDE DES POUVOIRS</h2>

            <div style="display: flex; align-items: center; margin-bottom: 15px;">
                <img src="images/star.png" style="width: 50px; margin-right: 15px;">
                <div><strong style="color: #FBD000;">SUPER √âTOILE :</strong> R√©v√®le toutes les cartes pendant un court instant.</div>
            </div>
            <div style="display: flex; align-items: center; margin-bottom: 15px;">
                <img src="images/fireflower.png" style="width: 50px; margin-right: 15px;">
                <div><strong style="color: #ff4d4d;">FLEUR DE FEU :</strong> Lance une boule de feu qui trouve et valide une paire pour vous !</div>
            </div>
            <div style="display: flex; align-items: center; margin-bottom: 15px;">
                <img src="images/1up.png" style="width: 50px; margin-right: 15px;">
                <div><strong style="color: #44D62C;">1-UP :</strong> Vous gagnez une vie suppl√©mentaire !</div>
            </div>

            <div style="display: flex; align-items: center; margin-bottom: 15px; border-top: 2px solid #555; padding-top: 15px;">
                <img src="images/ghost.png" style="width: 50px; margin-right: 15px;">
                <div><strong style="color: #ccc;">BOO (PI√àGE):</strong> Hante l'√©cran et le rend flou jusqu'√† votre prochain coup.</div>
            </div>
            <div style="display: flex; align-items: center; margin-bottom: 15px;">
                <img src="images/blooper.png" style="width: 50px; margin-right: 15px;">
                <div><strong style="color: #049CD8;">BLOOPER (PI√àGE) :</strong> Crache de l'encre sur l'√©cran pour cacher la vue !</div>
            </div>
            <div style="display: flex; align-items: center; margin-bottom: 15px;">
                <img src="images/kamek.png" style="width: 50px; margin-right: 15px;">
                <div><strong style="color: #3498db;">KAMEK (PI√àGE) :</strong> Utilise sa magie pour √©changer la place de quelques cartes !</div>
            </div>
            <div style="display: flex; align-items: center; margin-bottom: 15px;">
                <img src="images/bowser.png" style="width: 50px; margin-right: 15px;">
                <div><strong style="color: #44D62C;">BOWSER (PI√àGE) :</strong> Le grand m√©chant ! Il m√©lange toutes les cartes restantes.</div>
            </div>
            <div style="display: flex; align-items: center; margin-bottom: 15px;">
                <img src="images/bobomb.png" style="width: 50px; margin-right: 15px;">
                <div><strong style="color: #ff3333;">BOB-OMB (PI√àGE) :</strong> N'y touchez pas ! Si vous trouvez la paire, elle explose et vous perdez 1 vie.</div>
            </div>
            <div style="display: flex; align-items: center; margin-bottom: 15px;">
                <img src="images/iceflower.png" style="width: 50px; margin-right: 15px;">
                <div><strong style="color: #00ffff;">FLEUR DE GLACE (PI√àGE) :</strong> G√®le l'√©cran et vous emp√™che de jouer, mais le chrono continue de tourner !</div>
            </div>
            <div style="display: flex; align-items: center; margin-bottom: 15px;">
                <img src="images/chainchomp.png" style="width: 50px; margin-right: 15px;">
                <div><strong style="color: #555;">CHOMP (PI√àGE) :</strong> Il mord le plateau et encha√Æne plusieurs cartes pendant 10 secondes !</div>
            </div>
            <div style="display: flex; align-items: center; margin-bottom: 15px;">
                <img src="images/lightning.png" style="width: 50px; margin-right: 15px;">
                <div><strong style="color: #FFFF00;">√âCLAIR (PI√àGE) :</strong> Un flash aveuglant r√©tr√©cit toutes les cartes, les rendant difficiles √† cliquer !</div>
            </div>
            <div style="display: flex; align-items: center; margin-bottom: 15px;">
                <img src="images/poison.png" style="width: 50px; margin-right: 15px;">
                <div><strong style="color: #8A2BE2;">CHAMPI POISON (PI√àGE) :</strong> Un gaz toxique renverse tout votre √©cran √† l'envers pendant 10 secondes !</div>
            </div>
            <div style="display: flex; align-items: center; margin-bottom: 15px;">
                <img src="images/shyguy.png" style="width: 50px; margin-right: 15px;">
                <div><strong style="color: #ff69b4;">MASKASS (PI√àGE) :</strong> Il effraie les cartes ! Elles fuient votre souris pendant 8 secondes.</div>
            </div>
            <div style="display: flex; align-items: center; margin-bottom: 15px;">
                <img src="images/cherry.png" style="width: 50px; margin-right: 15px;">
                <div><strong style="color: #ff69b4;">DOUBLE CERISE (PI√àGE) :</strong> Cr√©e un clone de votre curseur pour vous embrouiller !</div>
            </div>

            <div style="text-align: center; margin-top: 20px;">
                <button class="btn-menu" onclick="toggleHelp()">J'AI COMPRIS !</button>
            </div>
        </div>
    </div>

    <div class="bowser-msg" id="bowserMsg">LES CARTES ONT √âT√â M√âLANG√âES !</div>

    <h1>Super Mario Memory</h1>
    <div class="info-panel">
        <span class="info-item" style="position: relative;">
            ‚è∞ <b id="timer">00</b>
            <span id="timeBonusIndicator" class="bonus-indicator">+5s</span>
        </span>
        <span class="info-item" style="position: relative;">
            ‚ù§Ô∏è <b id="lives">0</b>
            <span id="lifeBonusIndicator" class="bonus-indicator" style="color:#44D62C;">+1</span>
        </span>
        <span class="info-item">
            ‚≠ê <b id="score">0</b>
            <small>(<span id="multiplierDisplay">x1</span>)</small>
        </span>
        <span class="info-item">üèÜ <b id="bestScore">0</b></span>

        <div class="progress-container" title="Progression">
            <div id="progressBar"></div>
        </div>

        <div class="volume-control">
            <button class="btn-mute" id="muteBtn" onclick="toggleMute()">üîâ</button>
            <input type="range" id="volumeSlider" min="0" max="1" step="0.1" value="0.3">
        </div>

        <button class="hud-btn btn-theme" id="themeBtn" onclick="toggleTheme()">üåó</button>
        <button class="hud-btn" onclick="togglePause()">‚è∏ MENU</button>
        <button class="hud-btn btn-theme" onclick="toggleHelp()">?</button>
    </div>

    <div class="memory-game" id="gameBoard"></div>

    <div class="end-msg" id="winMessage" style="background: rgba(0,0,0,0.95);">
        <div id="newRecordMsg" class="new-record-text">NOUVEAU RECORD !</div>
        <h2 style="color: #FBD000;">VICTOIRE !</h2>
        <div class="score-table">
            <div class="score-row"><span>Paires & Combos :</span><span id="detailBase">0</span></div>
            <div class="score-row"><span>Bonus Rapidit√© :</span><span id="detailTime">0</span></div>
            <div class="score-row"><span>Bonus Survie :</span><span id="detailLife">0</span></div>
            <div class="score-total"><span>TOTAL :</span><span id="finalScore">0</span></div>
        </div>

        <div id="albumUnlockMsg" style="color: #44D62C; font-weight: bold; margin: 10px 0; display: none;">
            üéÅ Nouveaux stickers d√©bloqu√©s dans l'album !
        </div>

        <button class="btn-level" onclick="goToMainMenu()">Menu Principal</button>
        <button class="btn-level" onclick="restartCurrentLevel()">Rejouer</button>
    </div>

    <div class="end-msg" id="loseMessage" style="background: rgba(0,0,0,0.9);">
        <h2 id="loseTitle" style="color: #ff4d4d;">GAME OVER</h2>
        <p id="loseText" style="font-size: 1.5rem;">Bowser a gagn√©...</p>
        <button class="btn-level" onclick="restartCurrentLevel()">R√©essayer</button>
        <button class="btn-level" onclick="goToMainMenu()">Menu Principal</button>
    </div>

    <script src="script.js"></script>
</body>
</html>
