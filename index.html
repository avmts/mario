<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Super Mario Memory</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <audio id="bgMusic" loop><source src="audio/theme.mp3" type="audio/mpeg"></audio>
    <audio id="sfxPause"><source src="audio/pause.mp3" type="audio/mpeg"></audio>
    <audio id="sfxGameOver"><source src="audio/gameover.mp3" type="audio/mpeg"></audio>
    <audio id="sfxWin"><source src="audio/win.mp3" type="audio/mpeg"></audio>
    <audio id="sfxBowser"><source src="audio/bowser.mp3" type="audio/mpeg"></audio>
    <audio id="sfx1up"><source src="audio/1up.mp3" type="audio/mpeg"></audio>
    <audio id="sfxStar"><source src="audio/powerfull.mp3" type="audio/mpeg"></audio>
    <audio id="sfxFireball"><source src="audio/fireball.mp3" type="audio/mpeg"></audio>
    <audio id="sfxBoo"><source src="audio/boo.mp3" type="audio/mpeg"></audio>
    <audio id="sfxFlip"><source src="audio/flip.mp3" type="audio/mpeg"></audio>
    <audio id="sfxStart"><source src="audio/start.mp3" type="audio/mpeg"></audio>
    <audio id="sfxSplat"><source src="audio/splat.mp3" type="audio/mpeg"></audio>
    <audio id="sfxKamek"><source src="audio/kamek.mp3" type="audio/mpeg"></audio>
    <audio id="sfxExplosion"><source src="audio/explosion.mp3" type="audio/mpeg"></audio>
    <audio id="sfxShyGuy"><source src="audio/shyguy.mp3" type="audio/mpeg"></audio>
    <audio id="sfxSwish"><source src="audio/swish.mp3" type="audio/mpeg"></audio>
    <!-- Son pour l'achat -->
    <audio id="sfxCoin"><source src="audio/coin.mp3" type="audio/mpeg"></audio>

    <div class="overlay active" id="startMenu">
        <div class="menu-box">
            <h2 style="margin-top:0">CHOISIS TON NIVEAU</h2>

            <div class="wallet-display">
                <img src="images/coin.png" alt="Pi√®ce">
                <span id="menuWallet">0</span>
            </div>

            <button class="btn-level" onclick="openSelectionMenu('easy')">FACILE (5 Vies)</button>
            <button class="btn-level" onclick="openSelectionMenu('medium')">MOYEN (10 Vies)</button>
            <button class="btn-level" onclick="openSelectionMenu('hard')">DIFFICILE (15 Vies)</button>

            <button class="btn-level btn-shop" onclick="openShopMenu()">
                <img src="images/toadshop.png" style="height: 28px; vertical-align: middle; margin-right: 5px; margin-bottom: 4px;"> TOAD SHOP
            </button>

            <button class="btn-level" onclick="openClickerMenu()" style="background: linear-gradient(to bottom, #FF9800, #F57C00); border-color: #EF6C00;">
                <img src="images/block.png" style="height: 28px; vertical-align: middle; margin-right: 5px; margin-bottom: 4px;"> MARIO CLICKER
            </button>

            <div style="display: flex; gap: 10px; justify-content: center; width: 100%;">
                <button class="btn-level btn-custom" style="width: 48%; margin: 15px 0;" onclick="openCustomMenu()">üõ†Ô∏è PERSO</button>
                <button class="btn-level btn-skin" style="width: 48%; margin: 15px 0;" onclick="openSkinMenu()">üé® SKINS</button>
            </div>

            <button class="btn-level btn-bg" onclick="openBgMenu()">üåà FOND D'√âCRAN</button>

            <div style="display: flex; gap: 10px; justify-content: center; width: 100%;">
                <button class="btn-level btn-music" style="width: 48%; margin: 15px 0;" onclick="openMusicMenu()">üéµ MUSIQUE</button>
                <button class="btn-level btn-album" style="width: 48%; margin: 15px 0;" onclick="openAlbumMenu()">üìí ALBUM</button>
            </div>

            <button class="btn-level btn-stats" onclick="openStatsMenu()" style="background-color: #9C27B0; border-color: #BA68C8;">üìä STATS</button>

            <button class="btn-level btn-reset" onclick="resetBestScores()">üóëÔ∏è EFFACER SCORES</button>
        </div>
    </div>

    <div class="overlay" id="statsMenu">
        <div class="menu-box" style="max-width: 600px;">
            <h2 style="margin-top:0; color:#9C27B0;">STATISTIQUES</h2>

            <div class="stats-grid" style="text-align: left; font-size: 1.1rem;">
                <div class="stat-item" style="margin-bottom: 15px; border-bottom: 1px solid #ccc; padding-bottom: 10px;">
                    <strong>üïí Temps de jeu total :</strong> <span id="statTotalTime">0h 00m</span>
                </div>
                <div class="stat-item" style="margin-bottom: 15px; border-bottom: 1px solid #ccc; padding-bottom: 10px;">
                    <strong>üîÑ Cartes retourn√©es :</strong> <span id="statTotalFlips">0</span>
                </div>
                <div class="stat-item" style="margin-bottom: 15px; border-bottom: 1px solid #ccc; padding-bottom: 10px;">
                    <strong>‚ö†Ô∏è Pi√®ge le plus fr√©quent :</strong> <span id="statTopTrap" style="color: #E52521;">Aucun</span>
                </div>
                <div class="stat-item" style="margin-bottom: 15px;">
                    <strong>‚ù§Ô∏è Personnage favori :</strong> <span id="statFavChar" style="color: #44D62C;">Aucun</span>
                </div>
            </div>

            <button class="btn-menu" style="margin-top: 20px;" onclick="goToMainMenu()">RETOUR</button>
        </div>
    </div>

    <div class="overlay" id="clickerMenu">
        <div class="menu-box" style="max-width: 600px;">
            <div style="display:flex; align-items:center; justify-content:center; gap:15px;">
                <img src="images/block.png" style="height:60px;">
                <h2 style="margin:0; color:#FBD000; font-size: 2.5rem; text-shadow: 2px 2px 0 #000;">MARIO CLICKER</h2>
            </div>

            <div class="wallet-display">
                <img src="images/coin.png" alt="Pi√®ce">
                <span id="clickerWallet">0</span>
            </div>
            <div id="totalCpmDisplay">0 pi√®ces / min</div>
            <div id="totalCpsDisplay">0 pi√®ces / sec</div>

            <!-- BOSS CLICKER -->
            <div id="bossCooldownContainer" style="display: none; text-align: center; margin: 20px 0; font-style: italic;">
                Prochain Boss dans : <span id="bossCooldownTimer" style="font-weight: bold;">--:--:--</span>
            </div>

            <div id="bossContainer" style="display: none; margin: 20px 0; padding: 15px; background: rgba(0,0,0,0.4); border: 2px solid #ff3333; border-radius: 10px; position: relative;">
                <div style="display: flex; justify-content: space-between; color: #ff3333; font-weight: bold; margin-bottom: 5px;">
                    <span id="bossLevelText">BOSS NIV. 1</span>
                    <span id="bossTimer">05:00:00</span>
                </div>
                <div class="boss-img-container" onclick="hitBoss()">
                    <img src="images/bowser.png" id="bossImage" style="width: 100px; cursor: pointer;">
                </div>
                <div class="boss-hp-container" style="background: #333; height: 20px; border-radius: 10px; overflow: hidden; margin-top: 10px; border: 1px solid white;">
                    <div id="bossHpBar" style="width: 100%; height: 100%; background: linear-gradient(90deg, #ff3333, #ff0000); transition: width 0.1s;"></div>
                </div>
                <div id="bossHpText" style="color: white; font-size: 0.9rem; margin-top: 5px;">1000 / 1000</div>
                <p style="color: #FFD700; font-size: 0.8rem; margin: 5px 0 0 0; font-style: italic;">R√©compense : <span id="bossReward">2500</span> <img src="images/coin.png" style="width: 12px; vertical-align: middle;"></p>
            </div>

            <div class="clicker-area" style="margin: 30px 0; text-align: center;">
                <div id="clickerBlockContainer" style="display: inline-block; position: relative;">
                    <img src="images/block.png" id="clickerBlock" onclick="clickBlock()" style="width: 120px; cursor: pointer; transition: transform 0.05s; image-rendering: pixelated;">
                </div>
                <p style="color: #ccc; margin-top: 10px; font-style: italic;">Clique sur le bloc pour gagner des pi√®ces !</p>
            </div>

            <div class="upgrades-list" style="text-align: left; background: rgba(0,0,0,0.3); padding: 15px; border-radius: 10px; border: 2px solid #555;">
                <h3 style="margin-top:0; border-bottom: 1px solid #777; padding-bottom: 5px; color: #fff;">AM√âLIORATIONS</h3>

                <div class="upgrade-item" style="display: flex; align-items: center; justify-content: space-between; margin-top: 15px; background: rgba(255,255,255,0.05); padding: 10px; border-radius: 8px;">
                    <div style="display: flex; align-items: center;">
                        <img src="images/goomba.png" style="width: 50px; margin-right: 15px;">
                        <div>
                            <div style="font-weight: bold; font-size: 1.2rem; color: #A52A2A;">Goomba</div>
                            <div style="font-size: 0.9rem; color: #ddd;">Petits pas (<span id="goombaRateDisplay">0</span>/min)</div>
                            <div class="level-text">Niveau : <span id="goombaLevel">0</span></div>
                        </div>
                    </div>
                    <button class="btn-buy" id="btnBuyGoomba" onclick="buyGoomba()" style="min-width: 100px;">
                        <span id="goombaCost">5 000</span> <img src="images/coin.png" style="width: 15px; vertical-align: middle;">
                    </button>
                </div>
                <div class="upgrade-item" style="display: flex; align-items: center; justify-content: space-between; margin-top: 15px; background: rgba(255,255,255,0.05); padding: 10px; border-radius: 8px;">
                    <div style="display: flex; align-items: center;">
                        <img src="images/yoshi.png" style="width: 50px; margin-right: 15px;">
                        <div>
                            <div style="font-weight: bold; font-size: 1.2rem; color: #44D62C;">Yoshi</div>
                            <div style="font-size: 0.9rem; color: #ddd;">Clique pour toi (<span id="yoshiRateDisplay">0</span>/min)</div>
                            <div class="level-text">Niveau : <span id="yoshiLevel">0</span></div>
                        </div>
                    </div>
                    <button class="btn-buy" id="btnBuyYoshi" onclick="buyYoshi()" style="min-width: 100px;">
                        <span id="yoshiCost">30 000</span> <img src="images/coin.png" style="width: 15px; vertical-align: middle;">
                    </button>
                </div>

                <div class="upgrade-item" style="display: flex; align-items: center; justify-content: space-between; margin-top: 15px; background: rgba(255,255,255,0.05); padding: 10px; border-radius: 8px;">
                    <div style="display: flex; align-items: center;">
                        <img src="images/peach.png" style="width: 50px; margin-right: 15px;">
                        <div>
                            <div style="font-weight: bold; font-size: 1.2rem; color: #ff69b4;">Peach</div>
                            <div style="font-size: 0.9rem; color: #ddd;">Aide royale (<span id="peachRateDisplay">0</span>/min)</div>
                            <div class="level-text">Niveau : <span id="peachLevel">0</span></div>
                        </div>
                    </div>
                    <button class="btn-buy" id="btnBuyPeach" onclick="buyPeach()" style="min-width: 100px;">
                        <span id="peachCost">100 000</span> <img src="images/coin.png" style="width: 15px; vertical-align: middle;">
                    </button>
                </div>

                <div class="upgrade-item" style="display: flex; align-items: center; justify-content: space-between; margin-top: 15px; background: rgba(255,255,255,0.05); padding: 10px; border-radius: 8px;">
                    <div style="display: flex; align-items: center;">
                        <img src="images/toad.png" style="width: 50px; margin-right: 15px;">
                        <div>
                            <div style="font-weight: bold; font-size: 1.2rem; color: #E52521;">Toad</div>
                            <div style="font-size: 0.9rem; color: #ddd;">Service rapide (<span id="toadRateDisplay">0</span>/min)</div>
                            <div class="level-text">Niveau : <span id="toadLevel">0</span></div>
                        </div>
                    </div>
                    <button class="btn-buy" id="btnBuyToad" onclick="buyToad()" style="min-width: 100px;">
                        <span id="toadCost">350 000</span> <img src="images/coin.png" style="width: 15px; vertical-align: middle;">
                    </button>
                </div>

                <div class="upgrade-item" style="display: flex; align-items: center; justify-content: space-between; margin-top: 15px; background: rgba(255,255,255,0.05); padding: 10px; border-radius: 8px;">
                    <div style="display: flex; align-items: center;">
                        <img src="images/luigi.png" style="width: 50px; margin-right: 15px;">
                        <div>
                            <div style="font-weight: bold; font-size: 1.2rem; color: #44D62C;">Luigi</div>
                            <div style="font-size: 0.9rem; color: #ddd;">Super saut (<span id="luigiRateDisplay">0</span>/min)</div>
                            <div class="level-text">Niveau : <span id="luigiLevel">0</span></div>
                        </div>
                    </div>
                    <button class="btn-buy" id="btnBuyLuigi" onclick="buyLuigi()" style="min-width: 100px;">
                        <span id="luigiCost">1 000 000</span> <img src="images/coin.png" style="width: 15px; vertical-align: middle;">
                    </button>
                </div>

                <div class="upgrade-item" style="display: flex; align-items: center; justify-content: space-between; margin-top: 15px; background: rgba(255,255,255,0.05); padding: 10px; border-radius: 8px;">
                    <div style="display: flex; align-items: center;">
                        <img src="images/wario.png" style="width: 50px; margin-right: 15px;">
                        <div>
                            <div style="font-weight: bold; font-size: 1.2rem; color: #FBD000;">Wario</div>
                            <div style="font-size: 0.9rem; color: #ddd;">Cupidit√© (<span id="warioRateDisplay">0</span>/min)</div>
                            <div class="level-text">Niveau : <span id="warioLevel">0</span></div>
                        </div>
                    </div>
                    <button class="btn-buy" id="btnBuyWario" onclick="buyWario()" style="min-width: 100px;">
                        <span id="warioCost">1 500 000</span> <img src="images/coin.png" style="width: 15px; vertical-align: middle;">
                    </button>
                </div>

                <div class="upgrade-item" style="display: flex; align-items: center; justify-content: space-between; margin-top: 15px; background: rgba(255,255,255,0.05); padding: 10px; border-radius: 8px;">
                    <div style="display: flex; align-items: center;">
                        <img src="images/bowser.png" style="width: 50px; margin-right: 15px;">
                        <div>
                            <div style="font-weight: bold; font-size: 1.2rem; color: #E52521;">Bowser</div>
                            <div style="font-size: 0.9rem; color: #ddd;">Force brute (<span id="bowserRateDisplay">0</span>/min)</div>
                            <div class="level-text">Niveau : <span id="bowserLevel">0</span></div>
                        </div>
                    </div>
                    <button class="btn-buy" id="btnBuyBowser" onclick="buyBowser()" style="min-width: 100px;">
                        <span id="bowserCost">5 000 000</span> <img src="images/coin.png" style="width: 15px; vertical-align: middle;">
                    </button>
                </div>

                <div class="upgrade-item" style="display: flex; align-items: center; justify-content: space-between; margin-top: 15px; background: rgba(255,255,255,0.05); padding: 10px; border-radius: 8px;">
                    <div style="display: flex; align-items: center;">
                        <img src="images/harmony.png" style="width: 50px; margin-right: 15px;">
                        <div>
                            <div style="font-weight: bold; font-size: 1.2rem; color: #00ffff;">Harmonie</div>
                            <div style="font-size: 0.9rem; color: #ddd;">Magie stellaire (<span id="harmonyRateDisplay">0</span>/min)</div>
                            <div class="level-text">Niveau : <span id="harmonyLevel">0</span></div>
                        </div>
                    </div>
                    <button class="btn-buy" id="btnBuyHarmony" onclick="buyHarmony()" style="min-width: 100px;">
                        <span id="harmonyCost">25 000 000</span> <img src="images/coin.png" style="width: 15px; vertical-align: middle;">
                    </button>
                </div>
            </div>

            <button class="btn-menu" style="margin-top: 20px;" onclick="goToMainMenu()">RETOUR</button>
        </div>
    </div>

    <div class="overlay" id="shopMenu">
        <div class="menu-box" style="max-width: 800px;">
            <div style="display:flex; align-items:center; justify-content:center; gap:15px;">
                <img src="images/toadshop.png" style="height:100px; border-radius: 50%;">
                <h2 style="margin:0; color:#E52521; font-size: 2.5rem; text-shadow: 2px 2px 0 #000;">TOAD SHOP</h2>
            </div>
            <p>D√©pense tes pi√®ces pour acheter des bonus utilisables en jeu !</p>

            <div class="wallet-display large">
                <img src="images/coin.png" alt="Pi√®ce">
                <span id="shopWallet">0</span>
            </div>

            <div class="shop-grid">
                <!-- Ordre croissant des prix : 50k, 80k, 100k, 120k, 150k, 300k -->

                <div class="shop-item">
                    <div class="item-icon"><span style="font-size:3rem">‚è∞</span></div>
                    <div class="item-info">
                        <h3>Chrono +</h3>
                        <p>Ajoute +15 secondes.</p>
                        <div class="price">50 000 <img src="images/coin.png"></div>
                    </div>
                    <div class="item-action">
                        <span class="stock" id="stock-clock">x0</span>
                        <button class="btn-buy" onclick="buyItem('clock', 50000)">ACHETER</button>
                    </div>
                </div>

                <div class="shop-item" style="border-color: #FBD000; background: #fffde7;">
                    <div class="item-icon"><img src="images/block.png"></div>
                    <div class="item-info">
                        <h3 style="color:#b8860b">Bloc Surprise</h3>
                        <p>Utilise un objet au hasard !</p>
                        <div class="price">80 000 <img src="images/coin.png"></div>
                    </div>
                    <div class="item-action">
                        <span class="stock" id="stock-mysteryblock" style="background:#b8860b;">x0</span>
                        <button class="btn-buy" style="background:#FBD000; color:#b85c00;" onclick="buyItem('mysteryblock', 80000)">ACHETER</button>
                    </div>
                </div>

                <div class="shop-item">
                    <div class="item-icon"><img src="images/iceflower.png"></div>
                    <div class="item-info">
                        <h3>Fleur de Glace</h3>
                        <p>G√®le le temps (10s).</p>
                        <div class="price">100 000 <img src="images/coin.png"></div>
                    </div>
                    <div class="item-action">
                        <span class="stock" id="stock-iceflower">x0</span>
                        <button class="btn-buy" onclick="buyItem('iceflower', 100000)">ACHETER</button>
                    </div>
                </div>

                <div class="shop-item">
                    <div class="item-icon"><img src="images/fireflower.png"></div>
                    <div class="item-info">
                        <h3>Fleur de Feu</h3>
                        <p>Trouve une paire auto.</p>
                        <div class="price">120 000 <img src="images/coin.png"></div>
                    </div>
                    <div class="item-action">
                        <span class="stock" id="stock-fireflower">x0</span>
                        <button class="btn-buy" onclick="buyItem('fireflower', 120000)">ACHETER</button>
                    </div>
                </div>

                <div class="shop-item">
                    <div class="item-icon"><img src="images/1up.png"></div>
                    <div class="item-info">
                        <h3>Champi Vie</h3>
                        <p>+1 Vie en pleine partie.</p>
                        <div class="price">150 000 <img src="images/coin.png"></div>
                    </div>
                    <div class="item-action">
                        <span class="stock" id="stock-mushroom">x0</span>
                        <button class="btn-buy" onclick="buyItem('mushroom', 150000)">ACHETER</button>
                    </div>
                </div>

                <div class="shop-item">
                    <div class="item-icon"><img src="images/star.png"></div>
                    <div class="item-info">
                        <h3>Super √âtoile</h3>
                        <p>R√©v√®le tout pendant 3s.</p>
                        <div class="price">300 000 <img src="images/coin.png"></div>
                    </div>
                    <div class="item-action">
                        <span class="stock" id="stock-star">x0</span>
                        <button class="btn-buy" onclick="buyItem('star', 300000)">ACHETER</button>
                    </div>
                </div>
            </div>

            <button class="btn-menu" style="margin-top: 20px;" onclick="goToMainMenu()">RETOUR</button>
        </div>
    </div>

    <!-- UPDATE ICI: Structure de l'album modifi√©e pour l'affichage image + texte -->
    <div class="overlay" id="albumMenu">
        <div class="menu-box" style="max-width: 800px;">
            <h2 style="margin-top:0; color:#FFD700;">ALBUM DE COLLECTION</h2>
            <p id="albumProgress">Progression : 0 / 0</p>

            <div class="album-preview-box">
                <!-- Conteneur Image √† gauche -->
                <div class="album-preview-img-container">
                    <img id="previewImg" src="images/block.png" alt="Aper√ßu">
                </div>

                <!-- Conteneur Infos √† droite -->
                <div class="album-preview-info">
                    <h3 id="previewName">???</h3>
                    <!-- Effet affich√© ici (Bonus/Pi√®ge) -->
                    <div id="previewEffect" class="effect-desc type-neutral">...</div>
                    <!-- Description Bio affich√©e ici -->
                    <p id="previewBio" class="bio-desc">Survole un sticker d√©bloqu√© pour voir les d√©tails !</p>
                </div>
            </div>

            <div class="album-grid" id="albumGrid">
            </div>

            <button class="btn-menu" style="background: #555; border-color: #999; margin-top: 20px;" onclick="goToMainMenu()">RETOUR</button>
        </div>
    </div>

    <div class="overlay" id="skinMenu">
        <div class="menu-box">
            <h2 style="margin-top:0; color:#049CD8;">DOS DES CARTES</h2>
            <p>Gagne des parties pour d√©bloquer des styles !</p>

            <div class="skin-grid">
                <div class="skin-option" id="skin-block-option" onclick="selectSkin('skin-block')">
                    <img src="images/block.png" alt="Bloc ?">
                    <span>Classique</span>
                    <div class="skin-status">Gratuit</div>
                </div>

                <div class="skin-option" id="skin-pipe-option" onclick="selectSkin('skin-pipe')">
                    <div class="lock-overlay">üîí</div>
                    <img src="images/pipe.png" alt="Tuyau">
                    <span>Tuyau</span>
                    <div class="skin-status" id="progress-skin-pipe">0 / 15 (Facile)</div>
                </div>

                <div class="skin-option" id="skin-coin-option" onclick="selectSkin('skin-coin')">
                    <div class="lock-overlay">üîí</div>
                    <img src="images/coin.png" alt="Pi√®ce">
                    <span>Pi√®ce</span>
                    <div class="skin-status" id="progress-skin-coin">0 / 10 (Moyen)</div>
                </div>

                <div class="skin-option" id="skin-gold-option" onclick="selectSkin('skin-gold')">
                    <div class="lock-overlay">üîí</div>
                    <img src="images/goldblock.png" alt="Or">
                    <span>Bloc Or</span>
                    <div class="skin-status" id="progress-skin-gold">0 / 5 (Difficile)</div>
                </div>
            </div>

            <button class="btn-menu" style="margin-top: 20px;" onclick="goToMainMenu()">VALIDER</button>
        </div>
    </div>

    <div class="overlay" id="bgMenu">
        <div class="menu-box">
            <h2 style="margin-top:0; color:#FF5733;">PERSONNALISER LE FOND</h2>

            <div class="bg-mode-switch">
                <button id="btnEditLight" class="btn-mode" onclick="switchBgMode('light')">‚òÄÔ∏è MODE CLAIR</button>
                <button id="btnEditDark" class="btn-mode" onclick="switchBgMode('dark')">üåô MODE SOMBRE</button>
            </div>

            <p id="bgEditTitle" style="margin: 5px 0; font-style: italic; color: #666;">Couleurs actuelles :</p>

            <div class="color-picker-container">
                <div class="color-option">
                    <label>Couleur Principale</label>
                    <input type="color" id="bgColorInput" value="#5C94FC">
                </div>
                <div class="color-option">
                    <label>Couleur des Rayures</label>
                    <input type="color" id="bgLineInput" value="#6C9FFC">
                </div>
            </div>

            <button class="btn-menu" style="background: #333; border-color: #999; margin-top: 20px;" onclick="resetBackground()">‚Ü∫ D√âFAUT (Mode Actuel)</button>
            <button class="btn-menu" style="margin-top: 10px;" onclick="goToMainMenu()">VALIDER</button>
        </div>
    </div>

    <div class="overlay" id="musicMenu">
        <div class="menu-box" style="max-width: 500px;">
            <h2 style="margin-top:0; color:#9b59b6;">JUKEBOX MARIO üéµ</h2>
            <p>Choisis la musique de ta partie :</p>

            <button class="btn-menu btn-random" style="width: 100%; margin-bottom: 15px;" onclick="selectRandomMusic()">üîÄ SURPRENDS-MOI !</button>

            <div id="musicList" class="music-list-container">
            </div>

            <button class="btn-menu" style="margin-top: 20px;" onclick="goToMainMenu()">VALIDER</button>
        </div>
    </div>

    <div class="overlay" id="customMenu">
        <div class="menu-box">
            <h2 style="margin-top:0; color:#9b59b6;">PARTIE PERSO</h2>

            <div style="margin: 15px 0; text-align: left;">
                <div class="custom-label"><span>Paires</span> <b id="customPairsVal">8</b></div>
                <input type="range" id="customPairs" class="custom-range" min="2" max="46" value="8" oninput="document.getElementById('customPairsVal').innerText = this.value">
            </div>

            <div style="margin: 15px 0; text-align: left;">
                <div class="custom-label"><span>Vies</span> <b id="customLivesVal">10</b></div>
                <input type="range" id="customLives" class="custom-range" min="1" max="99" value="10" oninput="document.getElementById('customLivesVal').innerText = this.value">
            </div>

            <div style="margin: 15px 0; text-align: left;">
                <div class="custom-label"><span>Temps</span> <b id="customTimeVal">60s</b></div>
                <input type="range" id="customTime" class="custom-range" min="10" max="300" step="10" value="60" oninput="document.getElementById('customTimeVal').innerText = this.value + 's'">
            </div>

            <div style="display: flex; justify-content: center; gap: 10px;">
                <button class="btn-menu" style="background: #555; border-color: #999; width: 40%;" onclick="goToMainMenu()">RETOUR</button>
                <button class="btn-level btn-custom" style="width: 60%; margin: 10px 0;" onclick="setupCustomGame()">SUIVANT ‚û°</button>
            </div>
        </div>
    </div>

    <div class="overlay" id="selectionMenu">
        <div class="menu-box">
            <h2 style="margin-top:0">CHOISIS TON √âQUIPE</h2>
            <p id="selectionTitle">S√©lectionne 6 personnages</p>

            <div class="select-container" id="selectionGrid"></div>

            <p id="charDescription" class="char-description">Survole un personnage pour voir son effet.</p>

            <div style="display: flex; justify-content: center; gap: 10px; flex-wrap: wrap;">
                <button class="btn-menu" style="width: 150px; background: #555; border-color: #999;" onclick="goToMainMenu()">RETOUR</button>
                <button class="btn-menu btn-deselect" style="width: 160px;" onclick="deselectAll()">‚ùå TOUT VIDER</button>
                <button class="btn-menu btn-random" style="width: 180px;" onclick="randomSelection()">üé≤ AL√âATOIRE</button>
                <button id="btnStartGame" class="btn-menu btn-disabled" style="width: 150px;" onclick="confirmSelection()">JOUER !</button>
            </div>
        </div>
    </div>

    <div class="overlay" id="countdownOverlay">
        <div id="countdownText">3</div>
    </div>

    <div class="overlay" id="pauseMenu">
        <div class="menu-box">
            <h2 style="margin-top:0; color:#E52521">PAUSE</h2>
            <button class="btn-menu" onclick="togglePause()">‚ñ∂ REPRENDRE</button>
            <button class="btn-menu" onclick="restartCurrentLevel()">RECOMMENCER</button>
            <button class="btn-menu" onclick="goToMainMenu()">MENU PRINCIPAL</button>
        </div>
    </div>

    <div class="overlay" id="helpMenu">
        <div class="menu-box" style="max-width: 600px; text-align: left;">
            <h2 style="margin-top:0; color:#E52521; text-align: center;">GUIDE DES POUVOIRS</h2>

            <div style="display: flex; align-items: center; margin-bottom: 15px;">
                <img src="images/star.png" style="width: 50px; margin-right: 15px;">
                <div><strong style="color: #FBD000;">SUPER √âTOILE :</strong> R√©v√®le toutes les cartes pendant un court instant.</div>
            </div>
            <div style="display: flex; align-items: center; margin-bottom: 15px;">
                <img src="images/fireflower.png" style="width: 50px; margin-right: 15px;">
                <div><strong style="color: #ff4d4d;">FLEUR DE FEU :</strong> Lance une boule de feu qui trouve et valide une paire pour vous !</div>
            </div>
            <div style="display: flex; align-items: center; margin-bottom: 15px;">
                <img src="images/1up.png" style="width: 50px; margin-right: 15px;">
                <div><strong style="color: #44D62C;">1-UP :</strong> Vous gagnez une vie suppl√©mentaire !</div>
            </div>

            <div style="display: flex; align-items: center; margin-bottom: 15px; border-top: 2px solid #555; padding-top: 15px;">
                <img src="images/ghost.png" style="width: 50px; margin-right: 15px;">
                <div><strong style="color: #ccc;">BOO (PI√àGE):</strong> Hante l'√©cran et le rend flou jusqu'√† votre prochain coup.</div>
            </div>
            <div style="display: flex; align-items: center; margin-bottom: 15px;">
                <img src="images/blooper.png" style="width: 50px; margin-right: 15px;">
                <div><strong style="color: #049CD8;">BLOOPER (PI√àGE) :</strong> Crache de l'encre sur l'√©cran pour cacher la vue !</div>
            </div>
            <div style="display: flex; align-items: center; margin-bottom: 15px;">
                <img src="images/kamek.png" style="width: 50px; margin-right: 15px;">
                <div><strong style="color: #3498db;">KAMEK (PI√àGE) :</strong> Utilise sa magie pour √©changer la place de quelques cartes !</div>
            </div>
            <div style="display: flex; align-items: center; margin-bottom: 15px;">
                <img src="images/bowser.png" style="width: 50px; margin-right: 15px;">
                <div><strong style="color: #44D62C;">BOWSER (PI√àGE) :</strong> Le grand m√©chant ! Il m√©lange toutes les cartes restantes.</div>
            </div>
            <div style="display: flex; align-items: center; margin-bottom: 15px;">
                <img src="images/bobomb.png" style="width: 50px; margin-right: 15px;">
                <div><strong style="color: #ff3333;">BOB-OMB (PI√àGE) :</strong> N'y touchez pas ! Si vous trouvez la paire, elle explose et vous perdez 1 vie.</div>
            </div>
            <div style="display: flex; align-items: center; margin-bottom: 15px;">
                <img src="images/iceflower.png" style="width: 50px; margin-right: 15px;">
                <div><strong style="color: #00ffff;">FLEUR DE GLACE (PI√àGE) :</strong> G√®le l'√©cran et vous emp√™che de jouer, mais le chrono continue de tourner !</div>
            </div>
            <div style="display: flex; align-items: center; margin-bottom: 15px;">
                <img src="images/chainchomp.png" style="width: 50px; margin-right: 15px;">
                <div><strong style="color: #555;">CHOMP (PI√àGE) :</strong> Il mord le plateau et encha√Æne plusieurs cartes pendant 10 secondes !</div>
            </div>
            <div style="display: flex; align-items: center; margin-bottom: 15px;">
                <img src="images/lightning.png" style="width: 50px; margin-right: 15px;">
                <div><strong style="color: #FFFF00;">√âCLAIR (PI√àGE) :</strong> Un flash aveuglant r√©tr√©cit toutes les cartes, les rendant difficiles √† cliquer !</div>
            </div>
            <div style="display: flex; align-items: center; margin-bottom: 15px;">
                <img src="images/poison.png" style="width: 50px; margin-right: 15px;">
                <div><strong style="color: #8A2BE2;">CHAMPI POISON (PI√àGE) :</strong> Un gaz toxique renverse tout votre √©cran √† l'envers pendant 10 secondes !</div>
            </div>
            <div style="display: flex; align-items: center; margin-bottom: 15px;">
                <img src="images/shyguy.png" style="width: 50px; margin-right: 15px;">
                <div><strong style="color: #ff69b4;">MASKASS (PI√àGE) :</strong> Il effraie les cartes ! Elles fuient votre souris pendant 8 secondes.</div>
            </div>
            <div style="display: flex; align-items: center; margin-bottom: 15px;">
                <img src="images/cherry.png" style="width: 50px; margin-right: 15px;">
                <div><strong style="color: #ff69b4;">DOUBLE CERISE (PI√àGE) :</strong> Cr√©e un clone de votre curseur pour vous embrouiller !</div>
            </div>

            <div style="text-align: center; margin-top: 20px;">
                <button class="btn-menu" onclick="toggleHelp()">J'AI COMPRIS !</button>
            </div>
        </div>
    </div>

    <div class="bowser-msg" id="bowserMsg">LES CARTES ONT √âT√â M√âLANG√âES !</div>

    <h1>Super Mario Memory</h1>
    <div class="info-panel">
        <span class="info-item" style="position: relative;">
            ‚è∞ <b id="timer">00</b>
            <span id="timeBonusIndicator" class="bonus-indicator">+5s</span>
        </span>
        <span class="info-item" style="position: relative;">
            ‚ù§Ô∏è <b id="lives">0</b>
            <span id="lifeBonusIndicator" class="bonus-indicator" style="color:#44D62C;">+1</span>
        </span>
        <span class="info-item">
            ‚≠ê <b id="score">0</b>
            <small>(<span id="multiplierDisplay">x1</span>)</small>
        </span>
        <span class="info-item">üèÜ <b id="bestScore">0</b></span>

        <div class="progress-container" title="Progression">
            <div id="progressBar"></div>
        </div>

        <div id="inventoryContainer" class="inventory-container"></div>

        <div class="volume-control">
            <button class="btn-mute" id="muteBtn" onclick="toggleMute()">üîâ</button>
            <input type="range" id="volumeSlider" min="0" max="1" step="0.1" value="0.3">
        </div>

        <button class="hud-btn btn-theme" id="themeBtn" onclick="toggleTheme()">üåó</button>
        <button class="hud-btn" onclick="togglePause()">‚è∏ MENU</button>
        <button class="hud-btn btn-theme" onclick="toggleHelp()">?</button>
    </div>

    <div id="activeEffectsContainer" class="effects-container">
    </div>

    <div class="memory-game" id="gameBoard"></div>

    <div class="end-msg" id="winMessage" style="background: rgba(0,0,0,0.95);">
        <div id="newRecordMsg" class="new-record-text">NOUVEAU RECORD !</div>
        <h2 style="color: #FBD000;">VICTOIRE !</h2>
        <div class="score-table">
            <div class="score-row"><span>Paires & Combos :</span><span id="detailBase">0</span></div>
            <div class="score-row"><span>Bonus Rapidit√© :</span><span id="detailTime">0</span></div>
            <div class="score-row"><span>Bonus Survie :</span><span id="detailLife">0</span></div>
            <div class="score-row" style="color:#FBD000; font-weight:bold;"><span>Pi√®ces gagn√©es :</span><span id="winCoins">0</span></div>
            <div class="score-total"><span>TOTAL :</span><span id="finalScore">0</span></div>
        </div>

        <div id="albumUnlockMsg" style="color: #44D62C; font-weight: bold; margin: 10px 0; display: none;">
            üéÅ Nouveaux stickers d√©bloqu√©s dans l'album !
        </div>

        <button class="btn-level" onclick="goToMainMenu()">Menu Principal</button>
        <button class="btn-level" onclick="restartCurrentLevel()">Rejouer</button>
    </div>

    <div class="end-msg" id="loseMessage" style="background: rgba(0,0,0,0.9);">
        <h2 id="loseTitle" style="color: #ff4d4d;">GAME OVER</h2>
        <p id="loseText" style="font-size: 1.5rem;">Bowser a gagn√©...</p>
        <p style="color:#FBD000; font-weight:bold; font-size:1.2rem; margin-bottom:20px;">Pi√®ces gagn√©es : <span id="loseCoins">0</span></p>

        <button class="btn-level" onclick="restartCurrentLevel()">R√©essayer</button>
        <button class="btn-level" onclick="goToMainMenu()">Menu Principal</button>
    </div>

    <script src="script.js"></script>
</body>
</html>
